version: '3.8'

services:
  correction-ui:
    build:
      context: .
      dockerfile: Dockerfile
    image: correction-ui:latest
    container_name: correction-ui
    ports:
      - "3000:80"
    environment:
      # Supabase Configuration
      # These values are passed to the build process and embedded in the static bundle
      # For runtime environment variables in nginx, you would need a different approach
      - VITE_SUPABASE_URL=${VITE_SUPABASE_URL}
      - VITE_SUPABASE_SERVICE_KEY=${VITE_SUPABASE_SERVICE_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:80/"]
      interval: 30s
      timeout: 3s
      start_period: 5s
      retries: 3

# Note: For Unraid deployment, you can:
# 1. Build the image locally: docker-compose build
# 2. Save the image: docker save correction-ui:latest | gzip > correction-ui.tar.gz
# 3. Transfer to Unraid and load: docker load < correction-ui.tar.gz
# 4. Run with docker-compose or configure in Unraid UI with the environment variables above

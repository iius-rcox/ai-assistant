version: '3.8'

services:
  correction-ui:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Build-time arguments for Vite environment variables
        VITE_SUPABASE_URL: ${VITE_SUPABASE_URL}
        VITE_SUPABASE_SERVICE_KEY: ${VITE_SUPABASE_SERVICE_KEY}
    image: correction-ui:latest
    container_name: correction-ui
    ports:
      - "3000:80"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:80/"]
      interval: 30s
      timeout: 3s
      start_period: 5s
      retries: 3

# Note: For Unraid deployment, you can:
# 1. Build the image locally: docker-compose build
# 2. Save the image: docker save correction-ui:latest | gzip > correction-ui.tar.gz
# 3. Transfer to Unraid and load: docker load < correction-ui.tar.gz
# 4. Run with docker-compose or configure in Unraid UI with the environment variables above
